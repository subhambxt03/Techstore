<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechStore - Electronics E-commerce</title>
    
    <!-- CSS LINKS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Logo -->
            <div class="nav-logo">
                <a href="/" class="logo">
                    <i class="fas fa-laptop-code"></i>
                    <span>TechStore</span>
                </a>
            </div>

            <!-- Search -->
            <div class="nav-search">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search products, brands, categories...">
                    <button id="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <div class="search-results" id="search-results"></div>
                </div>
            </div>

            <!-- Navigation Links -->
            <div class="nav-links">
                <a href="/" class="nav-link active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#categories" class="nav-link">
                    <i class="fas fa-th-large"></i>
                    <span>Categories</span>
                </a>
                <a href="#deals" class="nav-link">
                    <i class="fas fa-tag"></i>
                    <span>Deals</span>
                </a>
                <div class="nav-icon" id="wishlist-btn">
                    <i class="fas fa-heart"></i>
                    <span class="icon-badge" id="wishlist-count">0</span>
                </div>
                <div class="nav-icon" id="cart-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="icon-badge" id="cart-count">0</span>
                </div>
                <div class="nav-icon" id="user-btn">
                    <i class="fas fa-user"></i>
                </div>
                <button class="chatbot-btn" id="chatbot-toggle">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </button>
            </div>
        </div>

        <!-- Category Navigation -->
        <div class="category-nav">
            <a href="#smartphones" class="category-link active" data-category="Smartphones">
                <i class="fas fa-mobile-alt"></i>
                <span>Smartphones</span>
            </a>
            <a href="#laptops" class="category-link" data-category="Laptops">
                <i class="fas fa-laptop"></i>
                <span>Laptops</span>
            </a>
            <a href="#headphones" class="category-link" data-category="Headphones">
                <i class="fas fa-headphones"></i>
                <span>Headphones</span>
            </a>
            <a href="#earbuds" class="category-link" data-category="Earbuds">
                <i class="fas fa-headphones-alt"></i>
                <span>Earbuds</span>
            </a>
        </div>
    </nav>

    <!-- User Dropdown Menu -->
    <div class="user-dropdown" id="user-dropdown">
        <div class="user-info" id="user-info">
            <div class="user-name">Welcome, Guest</div>
            <div class="user-email">Sign in to your account</div>
        </div>
        <div class="dropdown-menu">
            <a href="#login" class="dropdown-item" id="login-btn">
                <i class="fas fa-sign-in-alt"></i>
                <span>Login</span>
            </a>
            <a href="#register" class="dropdown-item" id="register-btn">
                <i class="fas fa-user-plus"></i>
                <span>Sign Up</span>
            </a>
            <a href="#profile" class="dropdown-item" id="profile-btn" style="display: none;">
                <i class="fas fa-user-circle"></i>
                <span>My Profile</span>
            </a>
            <a href="#orders" class="dropdown-item" id="orders-btn" style="display: none;">
                <i class="fas fa-box"></i>
                <span>My Orders</span>
            </a>
            <a href="#logout" class="dropdown-item" id="logout-btn" style="display: none;">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Check if we're on product details page or home page -->
        {% if product %}
        <!-- PRODUCT DETAILS PAGE (40%/60% Grid Layout) -->
        <div class="product-details-page">
            <!-- Breadcrumb Navigation -->
            <div class="product-breadcrumb">
                <nav class="breadcrumb-nav">
                    <a href="/">Home</a>
                    <span class="separator">â€º</span>
                    <a href="/?category={{ product.category|lower }}">{{ product.category }}</a>
                    <span class="separator">â€º</span>
                    <span class="current">{{ product.name }}</span>
                </nav>
            </div>

            <!-- Loading State -->
            <div id="loading-state" class="product-loading" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Loading product details...</p>
            </div>

            <!-- Main Product Container (40%/60% Grid) -->
            <div class="product-details-container" id="product-container">
                <!-- Left Side: Product Details (40%) -->
                <div class="product-details-left">
                    <span class="product-details-category">{{ product.category }}</span>
                    <h1 class="product-details-title">{{ product.name }}</h1>
                    
                    <!-- Rating -->
                    <div class="product-details-rating">
                        <div class="rating-stars" id="rating-stars">
                            {% set rating = product.rating or 0 %}
                            {% for i in range(5) %}
                                {% if i < rating|int %}
                                    <i class="fas fa-star"></i>
                                {% elif i == rating|int and rating|float % 1 >= 0.5 %}
                                    <i class="fas fa-star-half-alt"></i>
                                {% else %}
                                    <i class="far fa-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <span class="rating-count">({{ product.rating or 0 }}/5 from {{ product.review_count or 0 }} reviews)</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="product-details-price">
                        <span class="price-current">â‚¹{{ "{:,}".format(product.price) }}</span>
                        {% if product.original_price and product.original_price > product.price %}
                            <span class="price-original">â‚¹{{ "{:,}".format(product.original_price) }}</span>
                            {% set discount = ((product.original_price - product.price) / product.original_price * 100)|round|int %}
                            <span class="price-discount">{{ discount }}% OFF</span>
                        {% endif %}
                    </div>
                    
                    <!-- Product Meta Information -->
                    <div class="product-details-meta">
                        <div class="meta-item">
                            <div class="meta-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <span class="meta-label">Stock</span>
                            <span class="meta-value {% if product.in_stock %}text-success{% else %}text-danger{% endif %}">
                                {{ 'In Stock' if product.in_stock else 'Out of Stock' }}
                            </span>
                        </div>
                        {% if product.brand %}
                        <div class="meta-item">
                            <div class="meta-icon">
                                <i class="fas fa-tag"></i>
                            </div>
                            <span class="meta-label">Brand</span>
                            <span class="meta-value">{{ product.brand }}</span>
                        </div>
                        {% endif %}
                        <div class="meta-item">
                            <div class="meta-icon">
                                <i class="fas fa-shipping-fast"></i>
                            </div>
                            <span class="meta-label">Delivery</span>
                            <span class="meta-value">Free Shipping</span>
                        </div>
                    </div>
                    
                    <!-- Product Description -->
                    <div class="product-details-description">
                        <h3 class="description-title">
                            <i class="fas fa-info-circle"></i> Description
                        </h3>
                        <p class="description-text">
                            {{ product.description }}
                        </p>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="product-details-actions">
                        <button class="btn btn-primary" id="add-to-cart-btn" data-id="{{ product.id }}">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                        <button class="btn btn-outline" id="buy-now-btn" data-id="{{ product.id }}">
                            <i class="fas fa-bolt"></i> Buy Now
                        </button>
                        <button class="wishlist-toggle" id="wishlist-btn" data-id="{{ product.id }}">
                            <i class="{% if product.in_wishlist %}fas{% else %}far{% endif %} fa-heart"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Right Side: Product Images (60%) -->
                <div class="product-details-right">
                    <!-- Main Image -->
                    <div class="main-product-image">
                        <!-- CORRECTED: Use product.image instead of product.image_url -->
                        <img id="main-product-image" 
                             src="/static/images/products/{{ product.image or 'default.png' }}" 
                             alt="{{ product.name }}">
                    </div>
                    
                    <!-- Thumbnails -->
                    <div class="product-thumbnails" id="product-thumbnails">
                        <!-- CORRECTED: Handle additional_images properly -->
                        <div class="thumbnail active" onclick="changeMainImage('/static/images/products/{{ product.image or 'default.png' }}', this)">
                            <img src="/static/images/products/{{ product.image or 'default.png' }}" alt="Product Image">
                        </div>
                        {% if product.additional_images %}
                            {% for image in product.additional_images %}
                            <div class="thumbnail" onclick="changeMainImage('/static/images/products/{{ image }}', this)">
                                <img src="/static/images/products/{{ image }}" alt="Thumbnail {{ loop.index }}">
                            </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Product Specifications -->
            {% if product.specs %}
            <div class="product-specifications">
                <h2 class="specs-title">Product Specifications</h2>
                <div class="specs-grid">
                    {% for key, value in product.specs.items() %}
                    <div class="spec-item">
                        <div class="spec-key">{{ key }}</div>
                        <div class="spec-value">{{ value }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        {% else %}
        <!-- HOME PAGE CONTENT -->
        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-content">
                <h1>Top Deals on Electronics</h1>
                <p>Discover the latest smartphones, laptops, headphones & earbuds at unbeatable prices</p>
                <div class="hero-buttons">
                    <a href="#categories" class="btn btn-primary">Shop Now</a>
                    <a href="#deals" class="btn btn-outline">View Deals</a>
                </div>
            </div>
            <div class="hero-image">
                <!-- CORRECTED: Use local image instead of external URL -->
                <img src="/static/images/products/hero.png" alt="Electronics">
            </div>
        </section>

        <!-- Categories -->
        <section class="categories-section" id="categories">
            <div class="section-header">
                <h2>Shop by Category</h2>
                <p>Browse our wide range of electronics</p>
            </div>
            <div class="categories-grid">
                <div class="category-card" data-category="Smartphones">
                    <div class="category-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Smartphones</h3>
                    <p>Latest phones from top brands</p>
                    <button class="btn btn-outline">Shop Now</button>
                </div>
                <div class="category-card" data-category="Laptops">
                    <div class="category-icon">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <h3>Laptops</h3>
                    <p>Powerful laptops for work & play</p>
                    <button class="btn btn-outline">Shop Now</button>
                </div>
                <div class="category-card" data-category="Headphones">
                    <div class="category-icon">
                        <i class="fas fa-headphones"></i>
                    </div>
                    <h3>Headphones</h3>
                    <p>Premium audio experience</p>
                    <button class="btn btn-outline">Shop Now</button>
                </div>
                <div class="category-card" data-category="Earbuds">
                    <div class="category-icon">
                        <i class="fas fa-headphones-alt"></i>
                    </div>
                    <h3>Earbuds</h3>
                    <p>Wireless freedom</p>
                    <button class="btn btn-outline">Shop Now</button>
                </div>
            </div>
        </section>

        <!-- Category Products -->
        <section class="category-products-section">
            <div class="section-header">
                <h2 id="current-category">Smartphones</h2>
                <div class="category-filter">
                    <button class="filter-btn active" data-category="Smartphones">Smartphones</button>
                    <button class="filter-btn" data-category="Laptops">Laptops</button>
                    <button class="filter-btn" data-category="Headphones">Headphones</button>
                    <button class="filter-btn" data-category="Earbuds">Earbuds</button>
                </div>
            </div>
            <div class="products-grid" id="category-products">
                <!-- Category products will be loaded dynamically by JavaScript -->
                <div class="loading-products">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading products...</p>
                </div>
            </div>
        </section>

        <!-- Deals Section -->
        <section class="deals-section" id="deals">
            <div class="section-header">
                <h2>Today's Best Deals</h2>
                <p>Limited time offers with discounts</p>
            </div>
            <div class="products-grid" id="deals-products">
                <!-- Deals will be loaded dynamically by JavaScript -->
                <div class="loading-products">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading deals...</p>
                </div>
            </div>
        </section>
        {% endif %}
    </main>

    <!-- Chatbot -->
    <div class="chatbot-container" id="chatbot-container">
        <div class="chatbot-header">
            <div class="chatbot-title">
                <i class="fas fa-robot"></i>
                <h3>Store Assistant</h3>
            </div>
            <button class="chatbot-close" id="chatbot-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="chatbot-message bot">
                <div class="message-content">
                    Hello! ðŸ‘‹ I'm your AI shopping assistant. I can help you with:
                    â€¢ Product information
                    â€¢ Category details
                    â€¢ Price & deals
                    â€¢ Delivery info
                    â€¢ Return policy
                    How can I assist you today?
                </div>
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Type your question...">
            <button id="chatbot-send">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Modals -->
    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-identifier">Email or Phone Number</label>
                        <input type="text" id="login-identifier" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" required>
                    </div>
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="remember-me">
                            <span>Remember me</span>
                        </label>
                        <a href="#forgot-password" class="forgot-password">Forgot Password?</a>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Login</button>
                </form>
                <div class="auth-divider">
                    <span>or</span>
                </div>
                <button class="btn btn-outline btn-block" id="switch-to-register">
                    Create New Account
                </button>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Account</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="register-form">
                    <div class="form-group">
                        <label for="register-name">Full Name</label>
                        <input type="text" id="register-name" required>
                    </div>
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input type="email" id="register-email" required>
                    </div>
                    <div class="form-group">
                        <label for="register-phone">Phone Number</label>
                        <input type="tel" id="register-phone" required>
                    </div>
                    <div class="form-group">
                        <label for="register-address">Address</label>
                        <textarea id="register-address" rows="3" required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="register-pincode">Pin Code</label>
                            <input type="text" id="register-pincode" required maxlength="6">
                        </div>
                        <div class="form-group">
                            <label for="register-password">Password</label>
                            <input type="password" id="register-password" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="checkbox">
                            <input type="checkbox" id="terms" required>
                            <span>I agree to the Terms & Conditions</span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Create Account</button>
                </form>
                <div class="auth-divider">
                    <span>or</span>
                </div>
                <button class="btn btn-outline btn-block" id="switch-to-login">
                    Already have an account? Login
                </button>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>My Profile</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="profile-form">
                    <div class="form-group">
                        <label for="profile-name">Full Name</label>
                        <input type="text" id="profile-name" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-email">Email Address</label>
                        <input type="email" id="profile-email" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-phone">Phone Number</label>
                        <input type="tel" id="profile-phone" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-address">Address</label>
                        <textarea id="profile-address" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="profile-pincode">Pin Code</label>
                        <input type="text" id="profile-pincode" required maxlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Update Profile</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Orders Modal -->
    <div class="modal" id="orders-modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>My Orders</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="orders-container" id="orders-container">
                    <div class="loading-orders">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading orders...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal" id="forgot-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reset Password</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="forgot-step-1">
                    <div class="form-group">
                        <label>Enter your email or phone number</label>
                        <input type="text" id="forgot-identifier" required>
                    </div>
                    <button class="btn btn-primary btn-block" id="send-otp-btn">Send OTP</button>
                </div>
                <div id="forgot-step-2" style="display: none;">
                    <div class="form-group">
                        <label>Enter OTP sent to your email/phone</label>
                        <input type="text" id="forgot-otp" maxlength="6" required>
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="new-password" required>
                    </div>
                    <button class="btn btn-primary btn-block" id="reset-password-btn">Reset Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Modal (for quick view on home page) -->
    <div class="modal" id="product-modal">
        <div class="modal-content product-modal-content">
            <button class="modal-close">&times;</button>
            <div class="product-modal" id="product-modal-content">
                <!-- Product details will be loaded dynamically by JavaScript -->
                <div class="loading-product">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading product details...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cart-modal">
        <div class="modal-content cart-modal-content">
            <div class="modal-header">
                <h2>Your Shopping Cart</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="cart-items" id="cart-items">
                    <!-- Cart items will be loaded dynamically by JavaScript -->
                </div>
                <div class="cart-empty" id="cart-empty">
                    <i class="fas fa-shopping-cart"></i>
                    <h3>Your cart is empty</h3>
                    <p>Add some products to get started!</p>
                    <button class="btn btn-outline" id="continue-shopping">Continue Shopping</button>
                </div>
                <div class="cart-summary" id="cart-summary" style="display: none;">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span id="cart-subtotal">â‚¹0</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping</span>
                        <span id="cart-shipping">â‚¹99</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total</span>
                        <span id="cart-total">â‚¹0</span>
                    </div>
                    <button class="btn btn-primary btn-block" id="checkout-btn">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div class="modal" id="wishlist-modal">
        <div class="modal-content wishlist-modal-content">
            <div class="modal-header">
                <h2>My Wishlist</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="wishlist-items" id="wishlist-items">
                    <!-- Wishlist items will be loaded dynamically by JavaScript -->
                </div>
                <div class="wishlist-empty" id="wishlist-empty">
                    <i class="fas fa-heart"></i>
                    <h3>Your wishlist is empty</h3>
                    <p>Save products you like for later!</p>
                    <button class="btn btn-outline" id="browse-products">Browse Products</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="payment-modal">
        <div class="modal-content payment-modal-content">
            <div class="modal-header">
                <h2>Select Payment Method</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="payment-methods">
                    <div class="payment-method active" data-method="cod">
                        <i class="fas fa-money-bill-wave"></i>
                        <div class="payment-info">
                            <h4>Cash on Delivery</h4>
                            <p>Pay when you receive the product</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="card">
                        <i class="fas fa-credit-card"></i>
                        <div class="payment-info">
                            <h4>Credit/Debit Card</h4>
                            <p>Pay securely with your card</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="upi">
                        <i class="fas fa-mobile-alt"></i>
                        <div class="payment-info">
                            <h4>UPI Payment</h4>
                            <p>Pay using any UPI app</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="netbanking">
                        <i class="fas fa-university"></i>
                        <div class="payment-info">
                            <h4>Net Banking</h4>
                            <p>Pay directly from your bank</p>
                        </div>
                    </div>
                </div>
                <div class="payment-summary" id="payment-summary">
                    <!-- Payment summary will be loaded here -->
                </div>
                <div class="payment-actions">
                    <button class="btn btn-outline" id="cancel-payment">Cancel</button>
                    <button class="btn btn-primary" id="confirm-payment">Confirm & Pay</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <div class="footer-logo">
                    <i class="fas fa-laptop-code"></i>
                    <span>TechStore</span>
                </div>
                <p>Your one-stop shop for all electronics needs</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Shop</h3>
                <a href="#" onclick="setActiveCategory('Smartphones'); return false;">Smartphones</a>
                <a href="#" onclick="setActiveCategory('Laptops'); return false;">Laptops</a>
                <a href="#" onclick="setActiveCategory('Headphones'); return false;">Headphones</a>
                <a href="#" onclick="setActiveCategory('Earbuds'); return false;">Earbuds</a>
            </div>
            <div class="footer-section">
                <h3>Help</h3>
                <a href="#" onclick="showNotification('Contact: support@techstore.com', 'info'); return false;">Contact Us</a>
                <a href="#" onclick="showNotification('Check our FAQ section in the chatbot', 'info'); return false;">FAQ</a>
                <a href="#" onclick="showNotification('Free shipping on orders above â‚¹5000', 'info'); return false;">Shipping Policy</a>
                <a href="#" onclick="showNotification('10-day return policy', 'info'); return false;">Return Policy</a>
                <a href="#" onclick="showNotification('Your data is secure with us', 'info'); return false;">Privacy Policy</a>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p><i class="fas fa-map-marker-alt"></i> 123 Tech Street, Mumbai, India</p>
                <p><i class="fas fa-phone"></i> 1800-123-4567</p>
                <p><i class="fas fa-envelope"></i> support@techstore.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 TechStore. All rights reserved.</p>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Loading Spinner -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        // Function to change main image when thumbnail is clicked
        function changeMainImage(imageSrc, thumbnailElement) {
            // Update main image
            const mainImage = document.getElementById('main-product-image');
            if (mainImage) {
                mainImage.src = imageSrc;
            }
            
            // Update active thumbnail
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            thumbnailElement.classList.add('active');
        }

        // Initialize product page if we're on product details page
        document.addEventListener('DOMContentLoaded', function() {
            {% if product %}
            // Product details page specific initialization
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const buyNowBtn = document.getElementById('buy-now-btn');
            const wishlistBtn = document.getElementById('wishlist-btn');
            
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', function() {
                    const productId = this.dataset.id;
                    addToCart(productId);
                    showNotification('Product added to cart!', 'success');
                });
            }
            
            if (buyNowBtn) {
                buyNowBtn.addEventListener('click', function() {
                    const productId = this.dataset.id;
                    addToCart(productId);
                    showPaymentModal();
                });
            }
            
            if (wishlistBtn) {
                wishlistBtn.addEventListener('click', function() {
                    const productId = this.dataset.id;
                    {% if product.in_wishlist %}
                        removeFromWishlist(productId);
                        showNotification('Removed from wishlist!', 'info');
                    {% else %}
                        addToWishlist(productId);
                        showNotification('Added to wishlist!', 'success');
                    {% endif %}
                });
            }
            {% endif %}
        });
    </script>
</body>
</html>